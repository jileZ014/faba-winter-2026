<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Test - Clash of the Barbarians 2026</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #000; color: #0f0; }
        .log { margin: 5px 0; }
        .success { color: #0f0; }
        .error { color: #f00; }
        .info { color: #ff0; }
        button { padding: 10px 20px; font-size: 16px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>üèÄ Firebase Data Connectivity Test</h1>
    <button onclick="testFirebaseConnection()">Test Firebase Connection</button>
    <button onclick="testGameData()">Test Game Data</button>
    <button onclick="testTeamData()">Test Team Data</button>
    <div id="log"></div>
    
    <script>
        // Auto-run tests on page load
        setTimeout(() => {
            log('üöÄ Auto-running connectivity tests...', 'info');
            testFirebaseConnection();
            setTimeout(() => testGameData(), 2000);
            setTimeout(() => testTeamData(), 4000);
        }, 1000);
    </script>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <script>
        // Firebase configuration - FABA Winter 2026
        const firebaseConfig = {
            apiKey: "AIzaSyDTKErNXWVIFsEGhqYqQ2XE7eZGLTyoK_M",
            authDomain: "faba-winter-2026.firebaseapp.com",
            projectId: "faba-winter-2026",
            storageBucket: "faba-winter-2026.firebasestorage.app",
            messagingSenderId: "932225692280",
            appId: "1:932225692280:web:c56fde51eef1f246adf38d"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        function log(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `log ${type}`;
            div.textContent = new Date().toLocaleTimeString() + ' - ' + message;
            document.getElementById('log').appendChild(div);
            console.log(message);
        }

        async function testFirebaseConnection() {
            log('Testing Firebase connection...', 'info');
            try {
                await db.collection('divisions').limit(1).get();
                log('‚úÖ Firebase connection successful!', 'success');
            } catch (error) {
                log(`‚ùå Firebase connection failed: ${error.message}`, 'error');
                console.error(error);
            }
        }

        async function testGameData() {
            log('Testing game data access...', 'info');
            try {
                const snapshot = await db.collection('games').limit(5).get();
                log(`‚úÖ Found ${snapshot.size} games`, 'success');
                
                snapshot.forEach(doc => {
                    const game = doc.data();
                    log(`Game: ${game.team1} vs ${game.team2} - ${game.score1}-${game.score2}`, 'success');
                });
                
                if (snapshot.size === 0) {
                    log('‚ö†Ô∏è No game documents found', 'error');
                }
            } catch (error) {
                log(`‚ùå Error accessing game data: ${error.message}`, 'error');
                console.error(error);
            }
        }

        async function testTeamData() {
            log('Testing team data access...', 'info');
            try {
                const snapshot = await db.collection('teams').limit(5).get();
                log(`‚úÖ Found ${snapshot.size} teams`, 'success');
                
                snapshot.forEach(doc => {
                    const team = doc.data();
                    log(`Team: ${team.name} (${team.division}) - ${team.wins}W ${team.losses}L`, 'success');
                });
                
                if (snapshot.size === 0) {
                    log('‚ö†Ô∏è No team documents found', 'error');
                }
            } catch (error) {
                log(`‚ùå Error accessing team data: ${error.message}`, 'error');
                console.error(error);
            }
        }
    </script>
</body>
</html>