// AZ Flight Basketball League - Complete Application
let appState = { currentView: 'public', currentRole: null, selectedGame: null };

const leagueData = {
    standings: {
        '10U': [
            {rank: 1, team: 'Desert Hawks', wins: 8, losses: 2, pct: '.800', gb: '-'},
            {rank: 2, team: 'Valley Vipers', wins: 7, losses: 3, pct: '.700', gb: '1'},
            {rank: 3, team: 'Phoenix Storm', wins: 5, losses: 5, pct: '.500', gb: '3'},
            {rank: 4, team: 'Mesa Thunder', wins: 3, losses: 7, pct: '.300', gb: '5'}
        ],
        '12U': [
            {rank: 1, team: 'Scottsdale Suns', wins: 9, losses: 1, pct: '.900', gb: '-'},
            {rank: 2, team: 'Tempe Lions', wins: 6, losses: 4, pct: '.600', gb: '3'},
            {rank: 3, team: 'Chandler Chiefs', wins: 4, losses: 6, pct: '.400', gb: '5'},
            {rank: 4, team: 'Glendale Giants', wins: 2, losses: 8, pct: '.200', gb: '7'}
        ],
        '14U': [
            {rank: 1, team: 'Peoria Panthers', wins: 8, losses: 2, pct: '.800', gb: '-'},
            {rank: 2, team: 'Gilbert Eagles', wins: 7, losses: 3, pct: '.700', gb: '1'},
            {rank: 3, team: 'Surprise Spartans', wins: 4, losses: 6, pct: '.400', gb: '4'},
            {rank: 4, team: 'Buckeye Broncos', wins: 1, losses: 9, pct: '.100', gb: '7'}
        ],
        '16U': [
            {rank: 1, team: 'Arizona Elite', wins: 10, losses: 0, pct: '1.000', gb: '-'},
            {rank: 2, team: 'Phoenix Rising', wins: 7, losses: 3, pct: '.700', gb: '3'},
            {rank: 3, team: 'Valley Warriors', wins: 5, losses: 5, pct: '.500', gb: '5'},
            {rank: 4, team: 'Desert Kings', wins: 2, losses: 8, pct: '.200', gb: '8'}
        ]
    },
    schedule: [
        {date: 'Sat, Sept 21', time: '2:00 PM', homeTeam: 'Desert Hawks', awayTeam: 'Valley Vipers', court: 'Court A'},
        {date: 'Sat, Sept 21', time: '3:30 PM', homeTeam: 'Phoenix Storm', awayTeam: 'Mesa Thunder', court: 'Court B'},
        {date: 'Sun, Sept 22', time: '1:00 PM', homeTeam: 'Scottsdale Suns', awayTeam: 'Tempe Lions', court: 'Court A'},
        {date: 'Sun, Sept 22', time: '2:30 PM', homeTeam: 'Peoria Panthers', awayTeam: 'Gilbert Eagles', court: 'Court B'}
    ],
    playerStats: {
        scoring: [
            {name: 'Marcus Johnson', team: 'Desert Hawks', ppg: '18.5'},
            {name: 'Kevin Williams', team: 'Valley Vipers', ppg: '16.2'},
            {name: 'Tyler Anderson', team: 'Phoenix Storm', ppg: '14.8'}
        ],
        rebounding: [
            {name: 'David Lewis', team: 'Mesa Thunder', rpg: '12.3'},
            {name: 'Mike Thompson', team: 'Scottsdale Suns', rpg: '10.7'},
            {name: 'Alex Smith', team: 'Tempe Lions', rpg: '9.4'}
        ],
        assists: [
            {name: 'Ryan Parker', team: 'Chandler Chiefs', apg: '8.1'},
            {name: 'Josh Davis', team: 'Gilbert Eagles', apg: '6.9'},
            {name: 'Carlos Martinez', team: 'Arizona Elite', apg: '5.8'}
        ]
    }
};

// Complete application logic would continue here...
// This is a condensed version - the full file has all functionality
// Define scrollToSection function globally
window.scrollToSection = function(sectionId) {
    const element = document.getElementById(sectionId);
    if (element) {
        element.scrollIntoView({ behavior: 'smooth' });
    }
};

// Modal Management
function showLoginModal() {
    const modal = document.getElementById('loginModal');
    if (modal) {
        modal.classList.remove('hidden');
    }
}

function hideLoginModal() {
    const modal = document.getElementById('loginModal');
    if (modal) {
        modal.classList.add('hidden');
    }
}

// Role Selection Handler
function selectRole(role) {
    console.log('Role selected:', role);
    hideLoginModal();

    // Handle different roles
    switch(role) {
        case 'admin':
            // Redirect to admin page or load admin interface
            window.location.href = '/admin.html';
            break;
        case 'coach':
            // Redirect to coach page
            window.location.href = '/coach.html';
            break;
        case 'scorekeeper':
            // Redirect to scorekeeper page
            window.location.href = '/scorekeeper.html';
            break;
        default:
            alert(`${role.toUpperCase()} dashboard coming soon!`);
    }
}

// Setup Event Listeners
document.addEventListener('DOMContentLoaded', function() {
    // Staff Login Button
    const staffLoginBtn = document.getElementById('loginBtn');
        if (staffLoginBtn) {
        staffLoginBtn.addEventListener('click', showLoginModal);
    }

    // Close Modal Button
    const closeBtn = document.getElementById('closeLogin');
    if (closeBtn) {
        closeBtn.addEventListener('click', hideLoginModal);
    }

    // Role Cards
    document.querySelectorAll('.role-card').forEach(card => {
        card.addEventListener('click', function() {
            selectRole(this.dataset.role);
        });
    });

    // Close modal when clicking outside
    const modal = document.getElementById('loginModal');
    if (modal) {
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                hideLoginModal();
            }
        });
    }

    // Add Font Awesome if not already included
    if (!document.querySelector('link[href*="font-awesome"]')) {
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css';
        document.head.appendChild(link);
    }
});

// Staff Login Modal Functions
function showLoginModal() {
    const modal = document.getElementById('staffLoginModal');
    if (modal) {
        modal.classList.remove('hidden');
        modal.style.display = 'flex';
    }
}

function hideLoginModal() {
    const modal = document.getElementById('staffLoginModal');
    if (modal) {
        modal.classList.add('hidden');
        modal.style.display = 'none';
    }
}

function selectRole(role) {
    console.log('Role selected:', role);
    hideLoginModal();
    
    switch(role) {
        case 'admin':
            window.location.href = '/admin.html';
            break;
        case 'coach':
            alert('Coach dashboard coming soon!');
            break;
        case 'scorekeeper':
            alert('Scorekeeper dashboard coming soon!');
            break;
    }
}

// Attach event listeners when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    // Find the Staff Login button by its ID
    const staffLoginBtn = document.getElementById('staffLoginBtn');
    if (staffLoginBtn) {
        staffLoginBtn.onclick = showLoginModal;
        console.log('Staff login button connected');
    }
    
    // Close button
    const closeBtn = document.getElementById('closeLogin');
    if (closeBtn) {
        closeBtn.onclick = hideLoginModal;
    }
    
    // Role cards
    const roleCards = document.querySelectorAll('.role-card');
    roleCards.forEach(card => {
        card.onclick = function() {
            selectRole(this.dataset.role);
        };
    });
});

// Make functions globally available for onclick attributes
window.showLoginModal = showLoginModal;
window.hideLoginModal = hideLoginModal;
window.closeLoginModal = hideLoginModal;
window.selectRole = selectRole;